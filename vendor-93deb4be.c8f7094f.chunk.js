(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{20:function(e,vr,gr){"use strict";!function(r,e){gr.d(vr,"a",function(){return yr});var u,s=gr(22),n="warn";(k=u=u||{}).afterCreate="afterCreate",k.afterAttach="afterAttach",k.afterCreationFinalization="afterCreationFinalization",k.beforeDetach="beforeDetach",k.beforeDestroy="beforeDestroy";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function t(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function o(e){return ae(e,1),oe(e).type}function b(e,t){ae(e,1),ke(),oe(e).applyPatches(me(t))}function f(e,t){void 0===t&&(t=!0),ae(e,1);e=oe(e);return t?e.snapshot:je(e.type.getSnapshot(e,!1))}var h=(Object.defineProperty(d.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"state",{get:function(){return this._state},set:function(e){var t=this.isAlive;this._state=e;e=this.isAlive;this.aliveAtom&&t!==e&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"fireInternalHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._hookSubscribers&&this._hookSubscribers.emit(e,this,e)}}),Object.defineProperty(d.prototype,"registerHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._hookSubscribers||(this._hookSubscribers=new Ce),this._hookSubscribers.register(e,t)}}),Object.defineProperty(d.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"baseSetParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._parent=e,this._subpath=t,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}}),Object.defineProperty(d.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"getEscapedPath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&(this.pathAtom||(this.pathAtom=Object(s.n)("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?Re(this._subpath):""),this.parent.getEscapedPath(e)+"/"+this._escapedSubpath):""}}),Object.defineProperty(d.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isAlive",{get:function(){return this.state!==Q.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isDetaching",{get:function(){return this.state===Q.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=Object(s.n)("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"baseFinalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(0,this.state===Q.CREATED){if(this.parent){if(this.parent.state!==Q.FINALIZED)return;this.fireHook(u.afterAttach)}this.state=Q.FINALIZED,e&&e()}}}),Object.defineProperty(d.prototype,"baseFinalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=Q.DEAD}}),Object.defineProperty(d.prototype,"baseAboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.fireHook(u.beforeDestroy)}}),d);function d(e,t,r,n){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_escapedSubpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"storedValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aliveAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:Q.INITIALIZING}),Object.defineProperty(this,"_hookSubscribers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.environment=n,this.baseSetParent(t,r)}var y,v=(t(g,y=h),Object.defineProperty(g.prototype,"root",{get:function(){if(!this.parent)throw de("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.parent!==e,e=this.subpath!==t;(r||e)&&(this.environment=void 0,this.baseSetParent(this.parent,t))}}),Object.defineProperty(g.prototype,"snapshot",{get:function(){return je(this.getSnapshot())},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(g.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+e+(this.isAlive?"":" [dead]")}}),Object.defineProperty(g.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isAlive&&this.state!==Q.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(g.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeCreation()}}),Object.defineProperty(g.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseAboutToDie()}}),Object.defineProperty(g.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeDeath()}}),Object.defineProperty(g.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.fireInternalHook(e)}}),g);function g(e,t,r,n,i){n=y.call(this,e,t,r,n)||this;try{n.storedValue=e.createNewInstance(i)}catch(e){throw n.state=Q.DEAD,e}return n.state=Q.CREATED,n.finalizeCreation(),n}v.prototype.die=Object(s.k)(v.prototype.die);var m,w,P,O=1,j={onError:function(e){throw e}},_=(t(S,m=h),Object.defineProperty(S.prototype,"applyPatches",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applyPatches(e)}}),Object.defineProperty(S.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applySnapshot(e)}}),Object.defineProperty(S.prototype,"createObservableInstanceIfNeeded",{enumerable:!1,configurable:!0,writable:!0,value:function(){0===this._observableInstanceState&&this.createObservableInstance()}}),Object.defineProperty(S.prototype,"createObservableInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this._observableInstanceState=1;for(var t=[],r=this.parent;r&&0===r._observableInstanceState;)t.unshift(r),r=r.parent;try{for(var n=c(t),i=n.next();!i.done;i=n.next())i.value.createObservableInstanceIfNeeded()}catch(e){a={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}var a=this.type;try{this.storedValue=a.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,a.finalizeNewInstance(this,this.storedValue)}catch(e){throw this.state=Q.DEAD,e}finally{this._isRunningAction=!1}this._observableInstanceState=2,this._snapshotComputed.trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=fe,this.state=Q.CREATED,this.fireHook(u.afterCreate),this.finalizeCreation()}}),Object.defineProperty(S.prototype,"root",{get:function(){var e=this.parent;return e?e.root:this},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"clearParent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.parent){this.fireHook(u.beforeDetach);var e=this.state;this.state=Q.DETACHING;var t=this.root,r=t.environment,t=t.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=r,this.identifierCache=t}finally{this.state=e}}}}),Object.defineProperty(S.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e!==this.parent,n=t!==this.subpath;(r||n)&&(r?(this.environment=void 0,e.root.identifierCache.mergeCache(this),this.baseSetParent(e,t),this.fireHook(u.afterAttach)):n&&this.baseSetParent(this.parent,t))}}),Object.defineProperty(S.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.fireInternalHook(e);var r=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[e];"function"==typeof r&&(s.e?Object(s.e)(function(){r.apply(t.storedValue)}):r.apply(this.storedValue))}}),Object.defineProperty(S.prototype,"snapshot",{get:function(){return this._snapshotComputed.get()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}}),Object.defineProperty(S.prototype,"_getActualSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(S.prototype,"_getCachedInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r;return this._cachedInitialSnapshotCreated||(e=this.type,t=this._childNodes,r=this._initialSnapshot,this._cachedInitialSnapshot=e.processInitialSnapshot(t,r),this._cachedInitialSnapshotCreated=!0),this._cachedInitialSnapshot}}),Object.defineProperty(S.prototype,"isRunningAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()}}),Object.defineProperty(S.prototype,"assertAlive",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=n;if(!this.isAlive&&"ignore"!==t){var r=this._getAssertAliveError(e);switch(t){case"error":throw de(r);case"warn":De(r)}}}}),Object.defineProperty(S.prototype,"_getAssertAliveError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getEscapedPath(!1)||this.pathUponDeath||"",r=e.subpath&&Re(e.subpath)||"",n=e.actionContext||F,i="";return(n=n&&"action"!==n.type&&n.parentActionEvent?n.parentActionEvent:n)&&null!=n.name&&(i=(n&&n.context&&(ae(e=n.context,1),oe(e).path)||t)+"."+n.name+"()"),"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+t+"', Subpath: '"+r+"', Action: '"+i+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."}}),Object.defineProperty(S.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertAlive({subpath:e}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,e):this._childNodes[e]}finally{this._autoUnbox=!0}}}),Object.defineProperty(S.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertAlive(fe),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):ce(this._childNodes)}finally{this._autoUnbox=!0}}}),Object.defineProperty(S.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.type.getChildType(e)}}),Object.defineProperty(S.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"assertWritable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.assertAlive(e),!this.isRunningAction()&&this.isProtected)throw de("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")}}),Object.defineProperty(S.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.type.removeChild(this,e)}}),Object.defineProperty(S.prototype,"unbox",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&(this.assertAlive({subpath:e.subpath||e.subpathUponDeath}),this._autoUnbox?e.value:e)}}),Object.defineProperty(S.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>",t=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+e+t+(this.isAlive?"":" [dead]")}}),Object.defineProperty(S.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var i=this;this.baseFinalizeCreation(function(){var t,e;try{for(var r=c(i.getChildren()),n=r.next();!n.done;n=r.next())n.value.finalizeCreation()}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}i.fireInternalHook(u.afterCreationFinalization)})}}),Object.defineProperty(S.prototype,"detach",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isAlive)throw de("Error while detaching, node is not alive.");this.clearParent()}}),Object.defineProperty(S.prototype,"preboot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var r=this;this._applyPatches=W(this.storedValue,"@APPLY_PATCHES",function(e){e.forEach(function(e){var t;e.path?(t=Me(e.path),se(r,t.slice(0,-1)).applyPatchLocally(t[t.length-1],e)):r.type.applySnapshot(r,e.value)})}),this._applySnapshot=W(this.storedValue,"@APPLY_SNAPSHOT",function(e){if(e!==r.snapshot)return r.type.applySnapshot(r,e)}),Se(this.storedValue,"$treenode",this),Se(this.storedValue,"toJSON",ue)}}),Object.defineProperty(S.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isAlive&&this.state!==Q.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(S.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){0!==this._observableInstanceState&&(this.getChildren().forEach(function(e){e.aboutToDie()}),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))}}),Object.defineProperty(S.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getChildren().forEach(function(e){e.finalizeDeath()}),this.root.identifierCache.notifyDied(this);var e=this.snapshot;this._snapshotUponDeath=e,this._internalEventsClearAll(),this.baseFinalizeDeath()}}),Object.defineProperty(S.prototype,"onSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",e)}}),Object.defineProperty(S.prototype,"emitSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEventsEmit("snapshot",e)}}),Object.defineProperty(S.prototype,"onPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsRegister("patch",e)}}),Object.defineProperty(S.prototype,"emitPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;this._internalEventsHasSubscribers("patch")&&(r=(n=p(function(e){if(!("oldValue"in e))throw de("Patches without `oldValue` field cannot be inversed");return[function(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}(e),function(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}(e)]}(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++){var i,a=t[n];for(i in a)e[i]=a[i]}return e}({},e,{path:t.path.substr(this.path.length)+"/"+e.path})),2))[0],n=n[1],this._internalEventsEmit("patch",r,n)),this.parent&&this.parent.emitPatch(e,t)}}),Object.defineProperty(S.prototype,"hasDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsHas("dispose",e)}}),Object.defineProperty(S.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.hasDisposer(e))throw de("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",e,!0)}}),Object.defineProperty(S.prototype,"removeDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._internalEventsHas("dispose",e))throw de("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",e)}}),Object.defineProperty(S.prototype,"removeMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!this.middlewares||0<=(e=this.middlewares.indexOf(e))&&this.middlewares.splice(e,1)}}),Object.defineProperty(S.prototype,"addMiddleWare",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n={handler:e,includeHooks:t=void 0===t?!0:t};return this.middlewares?this.middlewares.push(n):this.middlewares=[n],function(){r.removeMiddleware(n)}}}),Object.defineProperty(S.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.assertWritable({subpath:e}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,e,t)}}),Object.defineProperty(S.prototype,"_addSnapshotReaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;this._hasSnapshotReaction||(e=Object(s.B)(function(){return t.snapshot},function(e){return t.emitSnapshot(e)},j),this.addDisposer(e),this._hasSnapshotReaction=!0)}}),Object.defineProperty(S.prototype,"_internalEventsHasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._internalEvents&&this._internalEvents.hasSubscribers(e)}}),Object.defineProperty(S.prototype,"_internalEventsRegister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===r&&(r=!1),this._internalEvents||(this._internalEvents=new Ce),this._internalEvents.register(e,t,r)}}),Object.defineProperty(S.prototype,"_internalEventsHas",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!!this._internalEvents&&this._internalEvents.has(e,t)}}),Object.defineProperty(S.prototype,"_internalEventsUnregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._internalEvents&&this._internalEvents.unregister(e,t)}}),Object.defineProperty(S.prototype,"_internalEventsEmit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._internalEvents&&(t=this._internalEvents).emit.apply(t,l([e],r))}}),Object.defineProperty(S.prototype,"_internalEventsClear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEvents&&this._internalEvents.clear(e)}}),Object.defineProperty(S.prototype,"_internalEventsClearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._internalEvents&&this._internalEvents.clearAll()}}),S);function S(e,t,r,n,i){var a=m.call(this,e,t,r,n)||this;if(Object.defineProperty(a,"nodeId",{enumerable:!0,configurable:!0,writable:!0,value:++O}),Object.defineProperty(a,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"unnormalizedIdentifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"identifierCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isProtectionEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_applyPatches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_applySnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_autoUnbox",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"_isRunningAction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_hasSnapshotReaction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_observableInstanceState",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(a,"_childNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_initialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_cachedInitialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_cachedInitialSnapshotCreated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_snapshotComputed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_snapshotUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_internalEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a._snapshotComputed=Object(s.l)(function(){return je(a.getSnapshot())}),a.unbox=a.unbox.bind(a),a._initialSnapshot=je(i),a.identifierAttribute=e.identifierAttribute,t||(a.identifierCache=new ee),a._childNodes=e.initializeChildNodes(a,a._initialSnapshot),a.identifier=null,a.unnormalizedIdentifier=null,a.identifierAttribute&&a._initialSnapshot){i=a._initialSnapshot[a.identifierAttribute];if(void 0!==i||(e=a._childNodes[a.identifierAttribute])&&(i=e.value),"string"!=typeof i&&"number"!=typeof i)throw de("Instance identifier '"+a.identifierAttribute+"' for type '"+a.type.name+"' must be a string or a number");a.identifier=""+i,a.unnormalizedIdentifier=i}return(t?t.root:a).identifierCache.addNodeToCache(a),a}_.prototype.createObservableInstance=Object(s.k)(_.prototype.createObservableInstance),_.prototype.detach=Object(s.k)(_.prototype.detach),_.prototype.die=Object(s.k)(_.prototype.die),(gt=P=P||{})[gt.String=1]="String",gt[gt.Number=2]="Number",gt[gt.Boolean=4]="Boolean",gt[gt.Date=8]="Date",gt[gt.Literal=16]="Literal",gt[gt.Array=32]="Array",gt[gt.Map=64]="Map",gt[gt.Object=128]="Object",gt[gt.Frozen=256]="Frozen",gt[gt.Optional=512]="Optional",gt[gt.Reference=1024]="Reference",gt[gt.Identifier=2048]="Identifier",gt[gt.Late=4096]="Late",gt[gt.Refinement=8192]="Refinement",gt[gt.Union=16384]="Union",gt[gt.Null=32768]="Null",gt[gt.Undefined=65536]="Undefined",gt[gt.Integer=131072]="Integer",gt[gt.Custom=262144]="Custom",gt[gt.SnapshotProcessor=524288]="SnapshotProcessor";var A="cannotDetermine",I=Symbol("$type"),C=(Object.defineProperty(T.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return q(this,e),this.instantiate(null,"",t,e).value}}),Object.defineProperty(T.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){throw de("unimplemented method")}}),Object.defineProperty(T.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===this}}),Object.defineProperty(T.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(le(e)){var r=o(e);return this.isAssignableFrom(r)?be:Z(t,e)}return this.isValidSnapshot(e,t)}}),Object.defineProperty(T.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 0===this.validate(e,[{path:"",type:this}]).length}}),Object.defineProperty(T.prototype,"Type",{get:function(){throw de("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"TypeWithoutSTN",{get:function(){throw de("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"SnapshotType",{get:function(){throw de("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"CreationType",{get:function(){throw de("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),T);function T(e){Object.defineProperty(this,w,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"C",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"S",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"N",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e}w=I,C.prototype.create=Object(s.k)(C.prototype.create);var E,V=(t(N,E=C),Object.defineProperty(N.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===e&&(e=this.getDefaultSnapshot()),E.prototype.create.call(this,e,t)}}),Object.defineProperty(N.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.createObservableInstanceIfNeeded(),e.storedValue}}),Object.defineProperty(N.prototype,"tryToReconcileNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!e.isDetaching&&(e.snapshot===t||(!(!ie(t)||oe(t)!==e)||!(e.type!==this||!Pe(t)||ie(t)||e.identifierAttribute&&e.identifier!==""+t[e.identifierAttribute])&&(e.applySnapshot(t),!0)))}}),Object.defineProperty(N.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(this.tryToReconcileNode(e,t))return e.setParent(r,n),e;if(e.die(),ie(t)&&this.isAssignableFrom(o(t))){e=oe(t);return e.setParent(r,n),e}return this.instantiate(r,n,void 0,t)}}),Object.defineProperty(N.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),N);function N(e){e=E.call(this,e)||this;return Object.defineProperty(e,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}V.prototype.create=Object(s.k)(V.prototype.create);var D,k=(t(x,D=C),Object.defineProperty(x.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(x.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(x.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(x.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!e.isDetaching&&e.type===this&&e.storedValue===t)return e;t=this.instantiate(r,n,void 0,t);return e.die(),t}}),Object.defineProperty(x.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),x);function x(){return null!==D&&D.apply(this,arguments)||this}function z(e){return"object"==typeof e&&e&&!0===e.isType}function R(e,t){ke()}new Map;Object.defineProperty(H.prototype,"finish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,e))}}),Object.defineProperty(H.prototype,"incFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending++}}),Object.defineProperty(H.prototype,"decFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending--}}),Object.defineProperty(H.prototype,"hasFlowsPending",{get:function(){return 0<this.flowsPending},enumerable:!1,configurable:!0});function H(e,t){Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"call",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"flowsPending",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!0}),e&&e.onStart(t)}var F,M=1;function U(e,t){var r=oe(e.context);"action"===e.type&&r.assertAlive({actionContext:e});var n=r._isRunningAction;r._isRunningAction=!0;var i=F;F=e;try{return function(e,t,i){var a=new K(e,i);if(a.isEmpty)return Object(s.k)(i).apply(null,t.args);var o=null;return function r(e){var t=a.getNextMiddleware(),n=t&&t.handler;if(!n)return Object(s.k)(i).apply(null,e.args);if(!t.includeHooks&&u[e.name])return r(e);return n(e,function(e,t){o=r(e),t&&(o=t(o))},function(e){o=e}),o}(t)}(r,e,t)}finally{F=i,r._isRunningAction=n}}function L(e){if(e)return"action"===e.type?e:e.parentActionEvent}function W(i,a,o){function e(){var e,t=M++,r=F,n=L(r);return U({type:"action",name:a,id:t,args:Ee(arguments),context:i,tree:(ae(e=i,1),oe(e).root.storedValue),rootId:r?r.rootId:t,parentId:r?r.id:0,allParentIds:r?l(r.allParentIds,[r.id]):[],parentEvent:r,parentActionEvent:n},o)}return e._isMSTAction=!0,e}var K=(Object.defineProperty(G.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"getNextMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.middlewares[this.arrayIndex];if(e){e=e[this.inArrayIndex++];return e||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}}),G);function G(e,t){Object.defineProperty(this,"arrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"inArrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t.$mst_middleware&&this.middlewares.push(t.$mst_middleware);for(var r=e;r;)r.middlewares&&this.middlewares.push(r.middlewares),r=r.parent}function Y(e){return"function"==typeof e?"<function"+(e.name?" "+e.name:"")+">":ie(e)?"<"+e+">":"`"+function(e){try{return JSON.stringify(e)}catch(e){return"<Unserializable: "+e+">"}}(e)+"`"}function $(e){var t=e.value,r=e.context[e.context.length-1].type,n=e.context.map(function(e){return e.path}).filter(function(e){return 0<e.length}).join("/"),i=0<n.length?'at path "/'+n+'" ':"",a=ie(t)?"value of type "+oe(t).type.name+":":Oe(t)?"value":"snapshot",n=r&&ie(t)&&r.is(oe(t).snapshot);return i+a+" "+Y(t)+" is not assignable "+(r?"to type: `"+r.name+"`":"")+(e.message?" ("+e.message+")":"")+(r?z(e=r)&&0<(e.flags&(P.String|P.Number|P.Integer|P.Boolean|P.Date))||Oe(t)?".":", expected an instance of `"+r.name+"` or a snapshot like `"+r.describe()+"` instead."+(n?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function B(e,t,r){return e.concat([{path:t,type:r}])}function Z(e,t,r){return[{context:e,value:t,message:r}]}function J(e){return e.reduce(function(e,t){return e.concat(t)},[])}function q(e,t){void 0!==r&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&"true"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).ENABLE_TYPE_CHECK&&function(e,t){var r=e.validate(t,[{path:"",type:e}]);if(0<r.length)throw de(function(e,t,r){return 0!==r.length?"Error while converting "+function(e){return e.length<280?e:e.substring(0,272)+"......"+e.substring(e.length-8)}(Y(t))+" to `"+e.name+"`:\n\n    "+r.map($).join("\n    "):void 0}(e,t,r))}(e,t)}var Q,X=0,ee=(Object.defineProperty(te.prototype,"updateLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.lastCacheModificationPerId.get(e);this.lastCacheModificationPerId.set(e,void 0===t?1:t+1)}}),Object.defineProperty(te.prototype,"getLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=this.lastCacheModificationPerId.get(e)||0;return this.cacheId+"-"+e}}),Object.defineProperty(te.prototype,"addNodeToCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(void 0===t&&(t=!0),e.identifierAttribute){var r=e.identifier;this.cache.has(r)||this.cache.set(r,s.z.array([],he));var n=this.cache.get(r);if(-1!==n.indexOf(e))throw de("Already registered");n.push(e),t&&this.updateLastCacheModificationPerId(r)}}}),Object.defineProperty(te.prototype,"mergeCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;Object(s.F)(e.identifierCache.cache).forEach(function(e){return e.forEach(function(e){t.addNodeToCache(e)})})}}),Object.defineProperty(te.prototype,"notifyDied",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r;e.identifierAttribute&&(t=e.identifier,(r=this.cache.get(t))&&(r.remove(e),r.length||this.cache.delete(t),this.updateLastCacheModificationPerId(e.identifier)))}}),Object.defineProperty(te.prototype,"splitCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var a=this,o=new te,l=e.path;return Object(s.p)(this.cache).forEach(function(e){for(var t=p(e,2),e=t[0],r=t[1],n=!1,i=r.length-1;0<=i;i--)0===r[i].path.indexOf(l)&&(o.addNodeToCache(r[i],!1),r.splice(i,1),n=!0);n&&a.updateLastCacheModificationPerId(e)}),o}}),Object.defineProperty(te.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){e=this.cache.get(e);return!!e&&e.some(function(e){return t.isAssignableFrom(e.type)})}}),Object.defineProperty(te.prototype,"resolve",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){var r=this.cache.get(e);if(!r)return null;var n=r.filter(function(e){return t.isAssignableFrom(e.type)});switch(n.length){case 0:return null;case 1:return n[0];default:throw de("Cannot resolve a reference to type '"+t.name+"' with id: '"+e+"' unambigously, there are multiple candidates: "+n.map(function(e){return e.path}).join(", "))}}}),te);function te(){Object.defineProperty(this,"cacheId",{enumerable:!0,configurable:!0,writable:!0,value:X++}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:s.z.map()}),Object.defineProperty(this,"lastCacheModificationPerId",{enumerable:!0,configurable:!0,writable:!0,value:s.z.map()})}function re(e,t,r,n,i){var a=le(i);if(a){if(a.parent)throw de("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+r+"', but it lives already at '"+a.path+"'");return t&&a.setParent(t,r),a}return new _(e,t,r,n,i)}function ne(e,t,r,n,i){return new v(e,t,r,n,i)}function ie(e){return!(!e||!e.$treenode)}function ae(e,t){ke()}function oe(e){if(!ie(e))throw de("Value "+e+" is no MST Node");return e.$treenode}function le(e){return e&&e.$treenode||null}function ue(){return oe(this).snapshot}(h=Q=Q||{})[h.INITIALIZING=0]="INITIALIZING",h[h.CREATED=1]="CREATED",h[h.FINALIZED=2]="FINALIZED",h[h.DETACHING=3]="DETACHING",h[h.DEAD=4]="DEAD";function se(e,t,r){void 0===r&&(r=!0);for(var n=e,i=0;i<t.length;i++){var a=t[i];if(".."===a){if(n=n.parent)continue}else{if("."===a)continue;if(n){if(n instanceof v)try{var o=n.value;ie(o)&&(n=oe(o))}catch(e){if(!r)return;throw e}if(n instanceof _){var l=n.getChildType(a);if(l&&(n=n.getChildNode(a)))continue}}}if(r)throw de("Could not resolve '"+a+"' in path '"+(Fe(t.slice(0,i))||"/")+"' while resolving '"+Fe(t)+"'");return}return n}function ce(r){if(!r)return be;var e=Object.keys(r);if(!e.length)return be;var n=new Array(e.length);return e.forEach(function(e,t){n[t]=r[e]}),n}var pe=Object.toString(),be=Object.freeze([]),fe=Object.freeze({}),he=Object(s.i)().useProxies?{deep:!1}:{deep:!1,proxy:!1};function de(e){return void 0===e&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function ye(e){return e}Object.freeze(he);var ve=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function ge(e){return Array.isArray(e)||Object(s.u)(e)}function me(e){return e?ge(e)?e:[e]:be}function we(e){if(null===e||"object"!=typeof e)return!1;var e=Object.getPrototypeOf(e);return null==e||(null===(e=e.constructor)||void 0===e?void 0:e.toString())===pe}function Pe(e){return!(null===e||"object"!=typeof e||e instanceof Date||e instanceof RegExp)}function Oe(e,t){return void 0===t&&(t=!0),null==e||!!("string"==typeof e||"number"==typeof e||"boolean"==typeof e||t&&e instanceof Date)}function je(e){return e}function _e(e,t,r){Object(s.w)(e)?Object(s.o)(e,t,r):Object.defineProperty(e,t,r)}function Se(e,t,r){_e(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}var Ae=(Object.defineProperty(Ie.prototype,"hasSubscribers",{get:function(){return 0<this.handlers.length},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return(t=void 0===t?!1:t)?this.handlers.unshift(e):this.handlers.push(e),function(){r.unregister(e)}}}),Object.defineProperty(Ie.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 0<=this.handlers.indexOf(e)}}),Object.defineProperty(Ie.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=this.handlers.indexOf(e);0<=e&&this.handlers.splice(e,1)}}),Object.defineProperty(Ie.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.handlers.length=0}}),Object.defineProperty(Ie.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handlers.slice().forEach(function(e){return e.apply(void 0,l(t))})}}),Ie);function Ie(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}var Ce=(Object.defineProperty(Te.prototype,"hasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=this.eventHandlers&&this.eventHandlers[e];return!!e&&e.hasSubscribers}}),Object.defineProperty(Te.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===r&&(r=!1),this.eventHandlers||(this.eventHandlers={}),(this.eventHandlers[e]||(this.eventHandlers[e]=new Ae)).register(t,r)}}),Object.defineProperty(Te.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=this.eventHandlers&&this.eventHandlers[e];return!!e&&e.has(t)}}),Object.defineProperty(Te.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=this.eventHandlers&&this.eventHandlers[e];e&&e.unregister(t)}}),Object.defineProperty(Te.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.eventHandlers&&delete this.eventHandlers[e]}}),Object.defineProperty(Te.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.eventHandlers=void 0}}),Object.defineProperty(Te.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e=this.eventHandlers&&this.eventHandlers[e];e&&e.emit.apply(e,l(t))}}),Te);function Te(){Object.defineProperty(this,"eventHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}function Ee(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t}function Ve(e,t){return 0===e.indexOf(t)}var Ne=function(e,t){};function De(e){console.warn(new Error("[mobx-state-tree] "+e))}function ke(){0}function xe(){ke()}function ze(e,t,r){ke(),(r=void 0===r?!0:r)||ke()}function Re(e){return"number"==typeof e==!0?""+e:-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function He(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Fe(e){if(0===e.length)return"";function t(e){return e.map(Re).join("/")}return"."===e[0]||".."===e[0]?t(e):"/"+t(e)}function Me(e){var t=e.split("/").map(He);if(!(""===e||"."===e||".."===e||Ve(e,"/")||Ve(e,"./")||Ve(e,"../")))throw de("a json path must be either rooted, empty or relative, but got '"+e+"'");return""===t[0]&&t.shift(),t}Ne.ids={};var Ue,Le=(t(We,Ue=C),Object.defineProperty(We.prototype,"flags",{get:function(){return this._subtype.flags|P.SnapshotProcessor},enumerable:!1,configurable:!0}),Object.defineProperty(We.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"snapshotProcessor("+this._subtype.describe()+")"}}),Object.defineProperty(We.prototype,"preProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.preProcessor?this._processors.preProcessor.call(null,e):e}}),Object.defineProperty(We.prototype,"postProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.postProcessor?this._processors.postProcessor.call(null,e):e}}),Object.defineProperty(We.prototype,"_fixNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;!function(e,t){for(var r,n,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];try{for(var o=c(i),l=o.next();!l.done;l=o.next()){var u=l.value;e[u]=t[u].bind(t)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}(e.type,this,"create");var r=e.getSnapshot;e.getSnapshot=function(){return t.postProcessSnapshot(r.call(e))}}}),Object.defineProperty(We.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=ie(n)?n:this.preProcessSnapshot(n),n=this._subtype.instantiate(e,t,r,n);return this._fixNode(n),n}}),Object.defineProperty(We.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=this._subtype.reconcile(e,ie(t)?t:this.preProcessSnapshot(t),r,n);return n!==e&&this._fixNode(n),n}}),Object.defineProperty(We.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!0);e=this._subtype.getSnapshot(e);return t?this.postProcessSnapshot(e):e}}),Object.defineProperty(We.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=this.preProcessSnapshot(e);return this._subtype.validate(e,t)}}),Object.defineProperty(We.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Object.defineProperty(We.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=z(e)?this._subtype:ie(e)?f(e,!1):this.preProcessSnapshot(e);return 0===this._subtype.validate(t,[{path:"",type:this._subtype}]).length}}),Object.defineProperty(We.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),We);function We(e,t,r){r=Ue.call(this,r||e.name)||this;return Object.defineProperty(r,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"_processors",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}var Ke,Ge="Map.put can only be used to store complex values that have an identifier type attribute";(gt=Ke=Ke||{})[gt.UNKNOWN=0]="UNKNOWN",gt[gt.YES=1]="YES",gt[gt.NO=2]="NO";var Ye,$e=(t(Be,Ye=s.b),Object.defineProperty(Be.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ye.prototype.get.call(this,""+e)}}),Object.defineProperty(Be.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ye.prototype.has.call(this,""+e)}}),Object.defineProperty(Be.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ye.prototype.delete.call(this,""+e)}}),Object.defineProperty(Be.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Ye.prototype.set.call(this,""+e,t)}}),Object.defineProperty(Be.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)throw de("Map.put cannot be used to set empty values");if(ie(e)){var t=oe(e);if(0,null===t.identifier)throw de(Ge);return this.set(t.identifier,e),e}if(Pe(e)){var r=oe(this),n=r.type;if(n.identifierMode!==Ke.YES)throw de(Ge);t=e[n.mapIdentifierAttribute];if(!br(t)){r=this.put(n.getChildType().create(e,r.environment));return this.put(f(r))}t=""+t;return this.set(t,e),this.get(t)}throw de("Map.put can only be used to store complex values")}}),Be);function Be(e){return Ye.call(this,e,s.z.ref.enhancer)||this}var Ze,Je=(t(qe,Ze=V),Object.defineProperty(qe.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=0<this.hookInitializers.length?this.hookInitializers.concat(e):[e];return new qe(this.name,this._subType,e)}}),Object.defineProperty(qe.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._determineIdentifierMode(),re(this,e,t,r,n)}}),Object.defineProperty(qe.prototype,"_determineIdentifierMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;this.identifierMode===Ke.UNKNOWN&&function e(t,r){var n,i,a=t.getSubTypes();if(a!==A){if(a){a=me(a);try{for(var o=c(a),l=o.next();!l.done;l=o.next())if(!e(l.value,r))return}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}return t instanceof ct&&r.push(t),1}}(this._subType,e=[])&&(t=void 0,e.forEach(function(e){if(e.identifierAttribute){if(t&&t!==e.identifierAttribute)throw de("The objects in a map should all have the same identifier attribute, expected '"+t+"', but child of type '"+e.name+"' declared attribute '"+e.identifierAttribute+"' as identifier");t=e.identifierAttribute}}),t?(this.identifierMode=Ke.YES,this.mapIdentifierAttribute=t):this.identifierMode=Ke.NO)}}),Object.defineProperty(qe.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){void 0===r&&(r={});var n=t.type._subType,i={};return Object.keys(r).forEach(function(e){i[e]=n.instantiate(t,e,void 0,r[e])}),i}}),Object.defineProperty(qe.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new $e(e)}}),Object.defineProperty(qe.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n){Object(s.j)(n,e.unbox),e.type.hookInitializers.forEach(function(e){var r=e(n);Object.keys(r).forEach(function(e){var t=r[e],t=W(n,e,t);Se(n,e,t)})}),Object(s.s)(n,this.willChange),Object(s.A)(n,this.didChange)}}),Object.defineProperty(qe.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"Map<string, "+this._subType.describe()+">"}}),Object.defineProperty(qe.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Object(s.F)(e.storedValue)}}),Object.defineProperty(qe.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=e.storedValue.get(""+t);if(!e)throw de("Not a child "+t);return e}}),Object.defineProperty(qe.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=oe(e.object),r=e.name;t.assertWritable({subpath:r});var n=t.type,i=n._subType;switch(e.type){case"update":var a=e.newValue;if(a===e.object.get(r))return null;q(i,a),e.newValue=i.reconcile(t.getChildNode(r),e.newValue,t,r),n.processIdentifier(r,e.newValue);break;case"add":q(i,e.newValue),e.newValue=i.instantiate(t,r,void 0,e.newValue),n.processIdentifier(r,e.newValue)}return e}}),Object.defineProperty(qe.prototype,"processIdentifier",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.identifierMode===Ke.YES&&t instanceof _){t=t.identifier;if(t!==e)throw de("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+t+"', but expected: '"+e+"'")}}}),Object.defineProperty(qe.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return e.getChildren().forEach(function(e){t[e.subpath]=e.snapshot}),t}}),Object.defineProperty(qe.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r={};return Object.keys(t).forEach(function(e){r[e]=t[e].getSnapshot()}),r}}),Object.defineProperty(qe.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=oe(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:Re(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:Re(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":var r=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:Re(e.name),oldValue:r},t)}}}),Object.defineProperty(qe.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.storedValue;switch(r.op){case"add":case"replace":n.set(t,r.value);break;case"remove":n.delete(t)}}}),Object.defineProperty(qe.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){q(this,t);var r=e.storedValue,n={};if(Array.from(r.keys()).forEach(function(e){n[e]=!1}),t)for(var i in t)r.set(i,t[i]),n[""+i]=!0;Object.keys(n).forEach(function(e){!1===n[e]&&r.delete(e)})}}),Object.defineProperty(qe.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(qe.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var n=this;return we(t)?J(Object.keys(t).map(function(e){return n._subType.validate(t[e],B(r,e,n._subType))})):Z(r,t,"Value is not a plain object")}}),Object.defineProperty(qe.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return fe}}),Object.defineProperty(qe.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.delete(t)}}),qe);function qe(e,t,r){void 0===r&&(r=[]);e=Ze.call(this,e)||this;return Object.defineProperty(e,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"identifierMode",{enumerable:!0,configurable:!0,writable:!0,value:Ke.UNKNOWN}),Object.defineProperty(e,"mapIdentifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Map}),Object.defineProperty(e,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e._determineIdentifierMode(),e.hookInitializers=r,e}Je.prototype.applySnapshot=Object(s.k)(Je.prototype.applySnapshot);var Qe,Xe=(t(et,Qe=V),Object.defineProperty(et.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e=0<this.hookInitializers.length?this.hookInitializers.concat(e):[e];return new et(this.name,this._subType,e)}}),Object.defineProperty(et.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return re(this,e,t,r,n)}}),Object.defineProperty(et.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(r,e){var n=r.type._subType,i={};return(e=void 0===e?[]:e).forEach(function(e,t){t=""+t;i[t]=n.instantiate(r,t,void 0,e)}),i}}),Object.defineProperty(et.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return s.z.array(ce(e),he)}}),Object.defineProperty(et.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,n){Object(s.h)(n).dehancer=e.unbox,e.type.hookInitializers.forEach(function(e){var r=e(n);Object.keys(r).forEach(function(e){var t=r[e],t=W(n,e,t);Se(n,e,t)})}),Object(s.s)(n,this.willChange),Object(s.A)(n,this.didChange)}}),Object.defineProperty(et.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType.describe()+"[]"}}),Object.defineProperty(et.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue.slice()}}),Object.defineProperty(et.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Number(t);if(r<e.storedValue.length)return e.storedValue[r];throw de("Not a child: "+t)}}),Object.defineProperty(et.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=oe(e.object);t.assertWritable({subpath:""+e.index});var r=t.type._subType,n=t.getChildren();switch(e.type){case"update":if(e.newValue===e.object[e.index])return null;var i=tt(t,r,[n[e.index]],[e.newValue],[e.index]);if(!i)return null;e.newValue=i[0];break;case"splice":var a=e.index,o=e.removedCount,l=e.added,i=tt(t,r,n.slice(a,a+o),l,l.map(function(e,t){return a+t}));if(!i)return null;e.added=i;for(var u=a+o;u<n.length;u++)n[u].setParent(t,""+(u+l.length-o))}return e}}),Object.defineProperty(et.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getChildren().map(function(e){return e.snapshot})}}),Object.defineProperty(et.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=[];return Object.keys(t).forEach(function(e){r.push(t[e].getSnapshot())}),r}}),Object.defineProperty(et.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=oe(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(var r=e.removedCount-1;0<=r;r--)t.emitPatch({op:"remove",path:""+(e.index+r),oldValue:e.removed[r].snapshot},t);for(r=0;r<e.addedCount;r++)t.emitPatch({op:"add",path:""+(e.index+r),value:t.getChildNode(""+(e.index+r)).snapshot,oldValue:void 0},t);return}}}),Object.defineProperty(et.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.storedValue,i="-"===t?n.length:Number(t);switch(r.op){case"replace":n[i]=r.value;break;case"add":n.splice(i,0,r.value);break;case"remove":n.splice(i,1)}}}),Object.defineProperty(et.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){q(this,t),e.storedValue.replace(t)}}),Object.defineProperty(et.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(et.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var n=this;return ge(e)?J(e.map(function(e,t){return n._subType.validate(e,B(r,""+t,n._subType))})):Z(r,e,"Value is not an array")}}),Object.defineProperty(et.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return be}}),Object.defineProperty(et.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.splice(Number(t),1)}}),et);function et(e,t,r){void 0===r&&(r=[]);e=Qe.call(this,e)||this;return Object.defineProperty(e,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Array}),Object.defineProperty(e,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e.hookInitializers=r,e}function tt(e,t,r,n,i){for(var a,o=!0,l=0;;l++){var u=l<=n.length-1,s=r[l],c=u?n[l]:void 0,p=""+i[l];if(((a=c)instanceof v||a instanceof _)&&(c=c.storedValue),!s&&!u)break;if(u)if(s)if(nt(s,c))r[l]=rt(t,e,p,c,s);else{for(var b=void 0,f=l;f<r.length;f++)if(nt(r[f],c)){b=r.splice(f,1)[0];break}o=!1;h=rt(t,e,p,c,b);r.splice(l,0,h)}else{if(ie(c)&&oe(c).parent===e)throw de("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+p+"', but it lives already at '"+oe(c).path+"'");var o=!1,h=rt(t,e,p,c);r.splice(l,0,h)}else o=!1,r.splice(l,1),s instanceof _&&s.createObservableInstanceIfNeeded(),s.die(),l--}return o?null:r}function rt(t,r,n,i,a){q(t,i);var e=function(){if(ie(i)){var e=oe(i);if(e.assertAlive(fe),null!==e.parent&&e.parent===r)return e.setParent(r,n),e}return a?t.reconcile(a,i,r,n):t.instantiate(r,n,void 0,i)}();return a&&a!==e&&(a instanceof _&&a.createObservableInstanceIfNeeded(),a.die()),e}function nt(e,t){if(e.isAlive){if(ie(t)){var r=oe(t);return r.isAlive&&r===e}return e.snapshot===t||e instanceof _&&null!==e.identifier&&e.identifierAttribute&&we(t)&&e.identifier===""+t[e.identifierAttribute]&&e.type.is(t)}}Xe.prototype.applySnapshot=Object(s.k)(Xe.prototype.applySnapshot);var it="preProcessSnapshot",at="postProcessSnapshot";function ot(){return oe(this).toString()}var lt={name:"AnonymousModel",properties:{},initializers:be};function ut(e){return Object.keys(e).reduce(function(e,t){var r;if(t in u)throw de("Hook '"+t+"' was defined as property. Hooks should be defined as part of the actions");var n=Object.getOwnPropertyDescriptor(e,t);if("get"in n)throw de("Getters are not supported as properties. Please use views instead");var i=n.value;if(null==i)throw de("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(Oe(i))return Object.assign({},e,((n={})[t]=kt(function(e){switch(typeof e){case"string":return dt;case"number":return yt;case"boolean":return vt;case"object":if(e instanceof Date)return mt}throw de("Cannot determine primitive type from value "+e)}(i),i),n));if(i instanceof Je)return Object.assign({},e,((r={})[t]=kt(i,{}),r));if(i instanceof Xe)return Object.assign({},e,((r={})[t]=kt(i,[]),r));if(z(i))return e;throw de("Invalid type definition for property '"+t+"', cannot infer a type from a value like '"+i+"' ("+typeof i+")")},e)}var st,ct=(t(pt,st=V),Object.defineProperty(pt.prototype,"_getIdentifierAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var r=void 0;return this.forAllProps(function(e,t){if(t.flags&P.Identifier){if(r)throw de("Cannot define property '"+e+"' as object identifier, property '"+r+"' is already defined as identifier property");r=e}}),r}}),Object.defineProperty(pt.prototype,"cloneAndEnhance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new pt({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor,postProcessor:e.postProcessor||this.postProcessor})}}),Object.defineProperty(pt.prototype,"actions",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;return this.cloneAndEnhance({initializers:[function(e){return r.instantiateActions(e,t(e)),e}]})}}),Object.defineProperty(pt.prototype,"instantiateActions",{enumerable:!1,configurable:!0,writable:!0,value:function(a,o){if(!we(o))throw de("actions initializer should return a plain object containing actions");Object.keys(o).forEach(function(e){if(e===it)throw de("Cannot define action '"+it+"', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(e===at)throw de("Cannot define action '"+at+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var t,r=o[e],n=a[e];e in u&&n&&(t=r,r=function(){n.apply(null,arguments),t.apply(null,arguments)});var i=r.$mst_middleware,r=r.bind(o);r.$mst_middleware=i;r=W(a,e,r);o[e]=r,Se(a,e,r)})}}),Object.defineProperty(pt.prototype,"volatile",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;if("function"!=typeof t)throw de("You passed an "+typeof t+" to volatile state as an argument, when function is expected");return this.cloneAndEnhance({initializers:[function(e){return r.instantiateVolatileState(e,t(e)),e}]})}}),Object.defineProperty(pt.prototype,"instantiateVolatileState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!we(t))throw de("volatile state initializer should return a plain object containing state");Object(s.D)(e,t)}}),Object.defineProperty(pt.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(o){var l=this;return this.cloneAndEnhance({initializers:[function(e){var t,r=o(e),n=r.actions,i=r.views,a=r.state;for(t in function(e,t){var r={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}(r,["actions","views","state"]))throw de("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+t+"'");return a&&l.instantiateVolatileState(e,a),i&&l.instantiateViews(e,i),n&&l.instantiateActions(e,n),e}]})}}),Object.defineProperty(pt.prototype,"views",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;return this.cloneAndEnhance({initializers:[function(e){return r.instantiateViews(e,t(e)),e}]})}}),Object.defineProperty(pt.prototype,"instantiateViews",{enumerable:!1,configurable:!0,writable:!0,value:function(n,i){if(!we(i))throw de("views initializer should return a plain object containing views");Object.keys(i).forEach(function(e){var t,r=Object.getOwnPropertyDescriptor(i,e);if("get"in r)Object(s.o)(n,e,r),Object(s.y)(n,((t={})[e]=s.l,t));else{if("function"!=typeof r.value)throw de("A view member should either be a function or getter based property");Se(n,e,r.value)}})}}),Object.defineProperty(pt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=ie(n)?n:this.applySnapshotPreProcessor(n);return re(this,e,t,r,i)}}),Object.defineProperty(pt.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(r,n){void 0===n&&(n={});var e=r.type,i={};return e.forAllProps(function(e,t){i[e]=t.instantiate(r,e,void 0,n[e])}),i}}),Object.defineProperty(pt.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return s.z.object(e,fe,he)}}),Object.defineProperty(pt.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){Se(r,"toString",ot),this.forAllProps(function(e){Object(s.j)(r,e,t.unbox)}),this.initializers.reduce(function(e,t){return t(e)},r),Object(s.s)(r,this.willChange),Object(s.A)(r,this.didChange)}}),Object.defineProperty(pt.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,r=oe(t.object),n=t.name;r.assertWritable({subpath:n});e=r.type.properties[n];return e&&(q(e,t.newValue),t.newValue=e.reconcile(r.getChildNode(n),t.newValue,r,n)),t}}),Object.defineProperty(pt.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,r=oe(t.object);r.type.properties[t.name]&&(e=t.oldValue?t.oldValue.snapshot:void 0,r.emitPatch({op:"replace",path:Re(t.name),value:t.newValue.snapshot,oldValue:e},r))}}),Object.defineProperty(pt.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this,n=[];return this.forAllProps(function(e){n.push(r.getChildNode(t,e))}),n}}),Object.defineProperty(pt.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!(t in this.properties))throw de("Not a value property: "+t);e=Object(s.h)(e.storedValue,t).raw();if(!e)throw de("Node not available for property "+t);return e}}),Object.defineProperty(pt.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(r,e){var n=this;void 0===e&&(e=!0);var i={};return this.forAllProps(function(e,t){Object(s.q)(r.storedValue,e).reportObserved(),i[e]=n.getChildNode(r,e).snapshot}),e?this.applySnapshotPostProcessor(i):i}}),Object.defineProperty(pt.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r={};return Object.keys(t).forEach(function(e){r[e]=t[e].getSnapshot()}),this.applySnapshotPostProcessor(r)}}),Object.defineProperty(pt.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if("replace"!==r.op&&"add"!==r.op)throw de("object does not support operation "+r.op);e.storedValue[t]=r.value}}),Object.defineProperty(pt.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){var r=this.applySnapshotPreProcessor(e);q(this,r),this.forAllProps(function(e){t.storedValue[e]=r[e]})}}),Object.defineProperty(pt.prototype,"applySnapshotPreProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.preProcessor;return t?t.call(null,e):e}}),Object.defineProperty(pt.prototype,"applySnapshotPostProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.postProcessor;return t?t.call(null,e):e}}),Object.defineProperty(pt.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return ze(),this.properties[e]}}),Object.defineProperty(pt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=this.applySnapshotPreProcessor(e);return we(n)?J(this.propertyNames.map(function(e){return r.properties[e].validate(n[e],B(t,e,r.properties[e]))})):Z(t,n,"Value is not a plain object")}}),Object.defineProperty(pt.prototype,"forAllProps",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;this.propertyNames.forEach(function(e){return t(e,r.properties[e])})}}),Object.defineProperty(pt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;return"{ "+this.propertyNames.map(function(e){return e+": "+t.properties[e].describe()}).join("; ")+" }"}}),Object.defineProperty(pt.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return fe}}),Object.defineProperty(pt.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue[t]=void 0}}),pt);function pt(e){var n=st.call(this,e.name||lt.name)||this;return Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Object}),Object.defineProperty(n,"initializers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"preProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"postProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"propertyNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"named",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.cloneAndEnhance({name:e})}}),Object.defineProperty(n,"props",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.cloneAndEnhance({properties:e})}}),Object.defineProperty(n,"preProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var r=n.preProcessor;return r?n.cloneAndEnhance({preProcessor:function(e){return r(t(e))}}):n.cloneAndEnhance({preProcessor:t})}}),Object.defineProperty(n,"postProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var r=n.postProcessor;return r?n.cloneAndEnhance({postProcessor:function(e){return t(r(e))}}):n.cloneAndEnhance({postProcessor:t})}}),Object.assign(n,lt,e),n.properties=ut(n.properties),je(n.properties),n.propertyNames=Object.keys(n.properties),n.identifierAttribute=n._getIdentifierAttribute(),n}function bt(e){return z(e)&&0<(e.flags&P.Object)}ct.prototype.applySnapshot=Object(s.k)(ct.prototype.applySnapshot);var ft,I=(t(ht,ft=k),Object.defineProperty(ht.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(ht.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return ne(this,e,t,r,n)}}),Object.defineProperty(ht.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.initializer(e)}}),Object.defineProperty(ht.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Oe(e)&&this.checker(e)?be:Z(t,e,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))}}),ht);function ht(e,t,r,n){void 0===n&&(n=ye);e=ft.call(this,e)||this;return Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"checker",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(e,"initializer",{enumerable:!0,configurable:!0,writable:!0,value:n}),e.flags=t,e}var dt=new I("string",P.String,function(e){return"string"==typeof e}),yt=new I("number",P.Number,function(e){return"number"==typeof e}),h=new I("integer",P.Integer,function(e){return ve(e)}),vt=new I("boolean",P.Boolean,function(e){return"boolean"==typeof e}),gt=new I("null",P.Null,function(e){return null===e}),V=new I("undefined",P.Undefined,function(e){return void 0===e}),I=new I("Date",P.Date,function(e){return"number"==typeof e||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});I.getSnapshot=function(e){return e.storedValue.getTime()};var mt=I;var wt,Pt=(t(Ot,wt=k),Object.defineProperty(Ot.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return ne(this,e,t,r,n)}}),Object.defineProperty(Ot.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return JSON.stringify(this.value)}}),Object.defineProperty(Ot.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Oe(e)&&e===this.value?be:Z(t,e,"Value is not a literal "+JSON.stringify(this.value))}}),Ot);function Ot(e){var t=wt.call(this,JSON.stringify(e))||this;return Object.defineProperty(t,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Literal}),t.value=e,t}function jt(e){return ke(),new Pt(e)}var _t,St=(t(At,_t=C),Object.defineProperty(At.prototype,"flags",{get:function(){return this._subtype.flags|P.Refinement},enumerable:!1,configurable:!0}),Object.defineProperty(At.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(At.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._subtype.instantiate(e,t,r,n)}}),Object.defineProperty(At.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(At.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._subtype.validate(e,t);if(0<r.length)return r;r=ie(e)?oe(e).snapshot:e;return this._predicate(r)?be:Z(t,e,this._message(e))}}),Object.defineProperty(At.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._subtype.reconcile(e,t,r,n)}}),Object.defineProperty(At.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),At);function At(e,t,r,n){e=_t.call(this,e)||this;return Object.defineProperty(e,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"_predicate",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(e,"_message",{enumerable:!0,configurable:!0,writable:!0,value:n}),e}var It,Ct=(t(Tt,It=C),Object.defineProperty(Tt.prototype,"flags",{get:function(){var t=P.Union;return this._types.forEach(function(e){t|=e.flags}),t},enumerable:!1,configurable:!0}),Object.defineProperty(Tt.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._types.some(function(e){return e.isAssignableFrom(t)})}}),Object.defineProperty(Tt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"("+this._types.map(function(e){return e.describe()}).join(" | ")+")"}}),Object.defineProperty(Tt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=this.determineType(n,void 0);if(!i)throw de("No matching type for union "+this.describe());return i.instantiate(e,t,r,n)}}),Object.defineProperty(Tt.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=this.determineType(t,e.type);if(!i)throw de("No matching type for union "+this.describe());return i.reconcile(e,t,r,n)}}),Object.defineProperty(Tt.prototype,"determineType",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return this._dispatcher?this._dispatcher(t):r?r.is(t)?r:this._types.filter(function(e){return e!==r}).find(function(e){return e.is(t)}):this._types.find(function(e){return e.is(t)})}}),Object.defineProperty(Tt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this._dispatcher)return this._dispatcher(e).validate(e,t);for(var r=[],n=0,i=0;i<this._types.length;i++){var a=this._types[i].validate(e,t);if(0===a.length){if(this._eager)return be;n++}else r.push(a)}return 1===n?be:Z(t,e,"No type is applicable for the union").concat(J(r))}}),Object.defineProperty(Tt.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._types}}),Tt);function Tt(e,t,r){e=It.call(this,e)||this;return Object.defineProperty(e,"_types",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"_dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(e,"_eager",{enumerable:!0,configurable:!0,writable:!0,value:!0}),r=a({eager:!0,dispatcher:void 0},r),e._dispatcher=r.dispatcher,r.eager||(e._eager=!1),e}function Et(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=z(e)?void 0:e,i=z(e)?l([e],t):t,e="("+i.map(function(e){return e.name}).join(" | ")+")";return new Ct(e,i,n)}var Vt,Nt=(t(Dt,Vt=C),Object.defineProperty(Dt.prototype,"flags",{get:function(){return this._subtype.flags|P.Optional},enumerable:!1,configurable:!0}),Object.defineProperty(Dt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype.describe()+"?"}}),Object.defineProperty(Dt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(0<=this.optionalValues.indexOf(n)){var i=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(e,t,r,i)}return this._subtype.instantiate(e,t,r,n)}}),Object.defineProperty(Dt.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._subtype.reconcile(e,this.optionalValues.indexOf(t)<0&&this._subtype.is(t)?t:this.getDefaultInstanceOrSnapshot(),r,n)}}),Object.defineProperty(Dt.prototype,"getDefaultInstanceOrSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e="function"==typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"==typeof this._defaultValue&&q(this,e),e}}),Object.defineProperty(Dt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return 0<=this.optionalValues.indexOf(e)?be:this._subtype.validate(e,t)}}),Object.defineProperty(Dt.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(Dt.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Dt);function Dt(e,t,r){var n=Vt.call(this,e.name)||this;return Object.defineProperty(n,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(n,"_defaultValue",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"optionalValues",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}function kt(e,t,r){return function(e,t){if("function"!=typeof t&&ie(t))throw de("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");R(e,1)}(e,t),new Nt(e,t,r||xt)}var xt=[void 0];var zt=kt(V,void 0),Rt=kt(gt,null);function Ht(e){return R(e,1),Et(e,zt)}var Ft,Mt=(t(Ut,Ft=C),Object.defineProperty(Ut.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|P.Late},enumerable:!1,configurable:!0}),Object.defineProperty(Ut.prototype,"getSubType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._subType){var t=void 0;try{t=this._definition()}catch(e){if(!(e instanceof ReferenceError))throw e;t=void 0}if(e&&void 0===t)throw de("Late type seems to be used too early, the definition (still) returns undefined");t&&(this._subType=t)}return this._subType}}),Object.defineProperty(Ut.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this.getSubType(!0).instantiate(e,t,r,n)}}),Object.defineProperty(Ut.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this.getSubType(!0).reconcile(e,t,r,n)}}),Object.defineProperty(Ut.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e?e.name:"<uknown late type>"}}),Object.defineProperty(Ut.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.getSubType(!1);return r?r.validate(e,t):be}}),Object.defineProperty(Ut.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getSubType(!1);return!!t&&t.isAssignableFrom(e)}}),Object.defineProperty(Ut.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e||A}}),Ut);function Ut(e,t){e=Ft.call(this,e)||this;return Object.defineProperty(e,"_definition",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}var Lt,Wt=(t(Kt,Lt=k),Object.defineProperty(Kt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<any immutable value>"}}),Object.defineProperty(Kt.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return ne(this,e,t,r,n)}}),Object.defineProperty(Kt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return"function"==typeof e?Z(t,e,"Value is not serializable and cannot be frozen"):this.subType?this.subType.validate(e,t):be}}),Kt);function Kt(e){var t=Lt.call(this,e?"frozen("+e.name+")":"frozen")||this;return Object.defineProperty(t,"subType",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Frozen}),t}var Gt=new Wt;var Yt=(Object.defineProperty($t.prototype,"updateResolvedReference",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=""+this.identifier,r=e.root,n=r.identifierCache.getLastCacheModificationPerId(t);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==n){var i=this.targetType,t=r.identifierCache.resolve(i,t);if(!t)throw new Zt("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+e.path+")");this.resolvedReference={node:t,lastCacheModification:n}}}}),Object.defineProperty($t.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),$t);function $t(e,t){if(Object.defineProperty(this,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolvedReference",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),br(e))this.identifier=e;else{if(!ie(e))throw de("Can only store references to tree nodes or identifiers, got: '"+e+"'");e=oe(e);if(!e.identifierAttribute)throw de("Can only store references with a defined identifier attribute.");e=e.unnormalizedIdentifier;if(null==e)throw de("Can only store references to tree nodes with a defined identifier.");this.identifier=e}}var Bt,Zt=(t(Jt,Bt=Error),Jt);function Jt(e){e=Bt.call(this,e)||this;return Object.setPrototypeOf(e,Jt.prototype),e}var qt,I=(t(Qt,qt=k),Object.defineProperty(Qt.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(Qt.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.targetType.isAssignableFrom(e)}}),Object.defineProperty(Qt.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return br(e)?be:Z(t,e,"Value is not a valid identifier, which is a string or a number")}}),Object.defineProperty(Qt.prototype,"fireInvalidated",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i,a=t.parent;a&&a.isAlive&&((i=a.storedValue)&&this.onInvalidated({cause:e,parent:i,invalidTarget:n?n.storedValue:void 0,invalidId:r,replaceRef:function(e){b(t.root.storedValue,{op:"replace",value:e,path:t.path})},removeRef:function(){bt(a.type)?this.replaceRef(void 0):b(t.root.storedValue,{op:"remove",path:t.path})}}))}}),Object.defineProperty(Qt.prototype,"addTargetNodeWatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(r,n){var i=this,e=this.getValue(r);if(e){var a=oe(e),e=function(e,t){t=function(e){switch(e){case u.beforeDestroy:return"destroy";case u.beforeDetach:return"detach";default:return}}(t);t&&i.fireInvalidated(t,r,n,a)},t=a.registerHook(u.beforeDetach,e),o=a.registerHook(u.beforeDestroy,e);return function(){t(),o()}}}}),Object.defineProperty(Qt.prototype,"watchTargetNodeForInvalidations",{enumerable:!1,configurable:!0,writable:!0,value:function(n,i,a){var o,e,l=this;this.onInvalidated&&(n.registerHook(u.beforeDestroy,function(){o&&o()}),e=function(e){o&&o();var t=n.parent,r=t&&t.storedValue;t&&t.isAlive&&r&&((a?!!a.get(i,r):n.root.identifierCache.has(l.targetType,""+i))?o=l.addTargetNodeWatcher(n,i):e||l.fireInvalidated("invalidSnapshotReference",n,i,null))},n.state===Q.FINALIZED?e(!0):(n.isRoot||n.root.registerHook(u.afterCreationFinalization,function(){n.parent&&n.parent.createObservableInstanceIfNeeded()}),n.registerHook(u.afterAttach,function(){e(!1)})))}}),Qt);function Qt(e,t){var r=qt.call(this,"reference("+e.name+")")||this;return Object.defineProperty(r,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(r,"onInvalidated",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Reference}),r}var Xt,er=(t(tr,Xt=I),Object.defineProperty(tr.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.isAlive)return e.storedValue.resolvedValue}}),Object.defineProperty(tr.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue.identifier}}),Object.defineProperty(tr.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=ie(n)?(ae(n,1),oe(n).identifier):n,n=new Yt(n,this.targetType),r=ne(this,e,t,r,n);return n.node=r,this.watchTargetNodeForInvalidations(r,i,void 0),r}}),Object.defineProperty(tr.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!e.isDetaching&&e.type===this){var i=ie(t),a=e.storedValue;if(!i&&a.identifier===t||i&&a.resolvedValue===t)return e.setParent(r,n),e}t=this.instantiate(r,n,void 0,t);return e.die(),t}}),tr);function tr(e,t){return Xt.call(this,e,t)||this}var rr,nr=(t(ir,rr=I),Object.defineProperty(ir.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.isAlive)return this.options.get(e.storedValue,e.parent?e.parent.storedValue:null)}}),Object.defineProperty(ir.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(ir.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=ie(n)?this.options.set(n,e?e.storedValue:null):n,r=ne(this,e,t,r,n);return this.watchTargetNodeForInvalidations(r,n,this.options),r}}),Object.defineProperty(ir.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){t=ie(t)?this.options.set(t,e?e.storedValue:null):t;if(!e.isDetaching&&e.type===this&&e.storedValue===t)return e.setParent(r,n),e;t=this.instantiate(r,n,void 0,t);return e.die(),t}}),ir);function ir(e,t,r){r=rr.call(this,e,r)||this;return Object.defineProperty(r,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}function ar(e,t){R(e,1);var r=t||void 0,t=t?t.onInvalidated:void 0;return r&&(r.get||r.set)?new nr(e,{get:r.get,set:r.set},t):new er(e,t)}var or,C=(t(lr,or=k),Object.defineProperty(lr.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!(e&&e.type instanceof ct))throw de("Identifier types can only be instantiated as direct child of a model type");return ne(this,e,t,r,n)}}),Object.defineProperty(lr.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(e.storedValue!==t)throw de("Tried to change identifier from '"+e.storedValue+"' to '"+t+"'. Changing identifiers is not allowed.");return e.setParent(r,n),e}}),Object.defineProperty(lr.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return typeof e!==this.validType?Z(t,e,"Value is not a valid "+this.describe()+", expected a "+this.validType):be}}),lr);function lr(e,t){e=or.call(this,e)||this;return Object.defineProperty(e,"validType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Identifier}),e}var ur,I=(t(sr,ur=C),Object.defineProperty(sr.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifier"}}),sr);function sr(){var e=ur.call(this,"identifier","string")||this;return Object.defineProperty(e,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Identifier}),e}var cr,C=(t(pr,cr=C),Object.defineProperty(pr.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(pr.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifierNumber"}}),pr);function pr(){return cr.call(this,"identifierNumber","number")||this}I=new I,C=new C;function br(e){return"string"==typeof e||"number"==typeof e}var fr,hr=(t(dr,fr=k),Object.defineProperty(dr.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(dr.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.options.isTargetType(e))return be;var r=this.options.getValidationMessage(e);return r?Z(t,e,"Invalid value for type '"+this.name+"': "+r):be}}),Object.defineProperty(dr.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.options.toSnapshot(e.storedValue)}}),Object.defineProperty(dr.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){n=this.options.isTargetType(n)?n:this.options.fromSnapshot(n,e&&e.root.environment);return ne(this,e,t,r,n)}}),Object.defineProperty(dr.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=!this.options.isTargetType(t);if(!e.isDetaching&&(e.type===this&&(i?t===e.snapshot:t===e.storedValue)))return e.setParent(r,n),e;t=i?this.options.fromSnapshot(t,r.root.environment):t,t=this.instantiate(r,n,void 0,t);return e.die(),t}}),dr);function dr(e){var t=fr.call(this,e.name)||this;return Object.defineProperty(t,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:P.Custom}),t}var yr={enumeration:function(e,t){return t=Et.apply(void 0,l((t="string"==typeof e?t:e).map(function(e){return jt(""+e)}))),"string"==typeof e&&(t.name=e),t},model:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():"AnonymousModel",n=e.shift()||{};return new ct({name:r,properties:n})},compose:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0],n=r?e[0]:"AnonymousModel";return r&&e.shift(),e.reduce(function(t,r){return t.cloneAndEnhance({name:t.name+"_"+r.name,properties:r.properties,initializers:r.initializers,preProcessor:function(e){return r.applySnapshotPreProcessor(t.applySnapshotPreProcessor(e))},postProcessor:function(e){return r.applySnapshotPostProcessor(t.applySnapshotPostProcessor(e))}})}).named(n)},custom:function(e){return new hr(e)},reference:ar,safeReference:function(e,t){return e=ar(e,a(a({},t),{onInvalidated:function(e){t&&t.onInvalidated&&t.onInvalidated(e),e.removeRef()}})),t&&!1===t.acceptsUndefined?e:Ht(e)},union:Et,optional:kt,literal:jt,maybe:Ht,maybeNull:function(e){return R(e,1),Et(e,Rt)},refinement:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="string"==typeof e[0]?e.shift():z(e[0])?e[0].name:null,n=e[0],i=e[1],a=e[2]||function(e){return"Value does not respect the refinement predicate"};return R(n,[1,2]),ze(),xe(),xe(),new St(r,n,i,a)},string:dt,boolean:vt,number:yt,integer:h,Date:mt,map:function(e){return new Je("map<string, "+e.name+">",e)},array:function(e){return R(e,1),new Xe(e.name+"[]",e)},frozen:function(e){return 0===arguments.length?Gt:z(e)?new Wt(e):kt(Gt,e)},identifier:I,identifierNumber:C,late:function(e,t){var r="string"==typeof e?e:"late("+e.toString()+")";return new Mt(r,e="string"==typeof e?t:e)},undefined:V,null:gt,snapshotProcessor:function(e,t,r){return R(e,1),new Le(e,t,r)}}}.call(this,gr(182),gr(535).setImmediate)}}]);